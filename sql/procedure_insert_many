DROP PROCEDURE IF EXISTS  test;

CREATE   PROCEDURE `test`(IN countRow INTEGER)
BEGIN 

 DECLARE i INT DEFAULT 1;
 DECLARE town_id INT DEFAULT 1;
 DECLARE citizen VARCHAR(32);

 
 SET @str = "INSERT INTO citizen (`name`) VALUES ";
 SELECT id, name INTO town_id, citizen   FROM town ORDER BY RAND() LIMIT 1;
 SET @str = CONCAT(@str," (\"", town_id,'_',citizen,"\")");
 
  WHILE i < countRow DO
 		SET i = i+1;
 		SELECT id, name INTO town_id, citizen   FROM town ORDER BY RAND() LIMIT 1;
 		SET @str = CONCAT(@str,", (\"", town_id,'_',citizen,"\")");
 
 		
 END WHILE;
 SET @str = CONCAT( @str, ";");
 
#SET @str = "SELECT COUNT(id) FROM citizen;";

PREPARE stmt FROM @str;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 

END;

CALL test(10);
