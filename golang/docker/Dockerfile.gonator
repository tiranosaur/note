FROM golang:1.20

# Устанавливаем рабочую директорию внутри контейнера
WORKDIR /app

# Копируем файлы проекта в рабочую директорию контейнера COPY go.mod go.sum ./
COPY go.mod ./
RUN go mod download

# Копируем файлы приложения в рабочую директорию контейнера
COPY cmd/gonator/*.go ./

# Собираем приложение
RUN go build -o server ./main.go

# Устанавливаем переменную окружения для порта, на котором будет работать сервер
ENV PORT=8080

# Запускаем сервер при старте контейнера
CMD ["./server"]